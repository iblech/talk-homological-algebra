\documentclass{amsart}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{etex}
\usepackage{amsmath,amsthm,amssymb,stmaryrd,color,graphicx,multirow}
\usepackage{mathtools}
\usepackage{xspace}
\usepackage[protrusion=true,expansion=true]{microtype}
\usepackage{hyperref}
\usepackage[all]{xy}

% http://tex.stackexchange.com/a/146081
\usepackage{etoc}
\etocsetlevel{sectionsummary}{2}
\newcommand*{\sectionsummary}[1]{\etoctoccontentsline{sectionsummary}{#1}}
\etocsettocstyle{\bigskip\centering\scshape Contents
                  \par\normalfont\raggedright}{\bigskip}
\makeatletter
%\let\original@l@section\l@section
%\etocsetstyle{section}{}{\original@l@section{\numberline{\etocnumber}\etocname}{\etocpage}}{}
\etocsetstyle{section}{\normalfont}{\numberline{\etocnumber}\etocname}{\hfill\etocpage\par}{}
\makeatother
\etocsetlevel{sectionsummary}{2}
\etocsetstyle{sectionsummary}{\hskip1.74em}{\textit{\small\etocname}}{\par\vskip-0.5em}{}

\usepackage{mathpazo}
\linespread{1.05}

\theoremstyle{definition}
\newtheorem{defn}{Definition}[section]
\newtheorem{ex}[defn]{Example}

\theoremstyle{plain}

\newtheorem{prop}[defn]{Proposition}
\newtheorem{cor}[defn]{Corollary}
\newtheorem{lemma}[defn]{Lemma}
\newtheorem{thm}[defn]{Theorem}

\theoremstyle{remark}
\newtheorem{rem}[defn]{Remark}

\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\FF}{\mathbb{F}}
\renewcommand{\AA}{\mathbb{A}}
\newcommand{\A}{\mathcal{A}}
\newcommand{\B}{\mathcal{B}}
\newcommand{\C}{\mathcal{C}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\E}{\mathcal{E}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\G}{\mathcal{G}}
\renewcommand{\H}{\mathcal{H}}
\renewcommand{\O}{\mathcal{O}}
\newcommand{\K}{\mathcal{K}}
\newcommand{\N}{\mathcal{N}}
\newcommand{\M}{\mathcal{M}}
\renewcommand{\L}{\mathcal{L}}
\renewcommand{\P}{\mathcal{P}}
\newcommand{\R}{\mathcal{R}}
\newcommand{\I}{\mathcal{I}}
\renewcommand{\S}{\mathcal{S}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\LL}{\mathbb{L}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\GG}{\mathbb{G}}
\newcommand{\aaa}{\mathfrak{a}}
\newcommand{\ppp}{\mathfrak{p}}
\newcommand{\mmm}{\mathfrak{m}}
\newcommand{\nnn}{\mathfrak{n}}
\newcommand{\Ext}{\mathrm{Ext}}
\newcommand{\Tor}{\mathrm{Tor}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\HOM}{\mathcal{H}\mathrm{om}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\GL}{\mathrm{GL}}
\newcommand{\placeholder}{\underline{\ \ \ }}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\Set}{\mathrm{Set}}
\newcommand{\Grp}{\mathrm{Grp}}
\newcommand{\Vect}{\mathrm{Vect}}
\newcommand{\Sh}{\mathrm{Sh}}
\newcommand{\PSh}{\mathrm{PSh}}
\newcommand{\Zar}{\mathrm{Zar}}
\newcommand{\Sch}{\mathrm{Sch}}
\newcommand{\Ab}{\mathrm{Ab}}
\newcommand{\AbSh}{\mathrm{AbSh}}
\newcommand{\Mod}{\mathrm{Mod}}
\newcommand{\Alg}{\mathrm{Alg}}
\newcommand{\Ring}{\mathrm{Ring}}
\newcommand{\LRL}{\mathrm{LRL}}
\newcommand{\pt}{\mathrm{pt}}
\newcommand{\tors}{\mathrm{tors}}
\DeclareMathOperator{\Spec}{Spec}
\newcommand{\QcohSpec}[2]{\mathrm{Spec}^{\mathrm{qcoh}}_{#1}{#2}}
\newcommand{\RelSpec}[2]{\mathrm{RelSpec}_{#1}{#2}}
\newcommand{\op}{\mathrm{op}}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\Clos}{cl}
\DeclareMathOperator{\Kernel}{ker}
\DeclareMathOperator{\Cokernel}{cok}
\DeclareMathOperator{\supp}{supp}
\newcommand{\Ass}{\mathrm{Ass}}
\newcommand{\Open}{\mathrm{Op}}
\newcommand{\?}{\,{:}\,}
\renewcommand{\_}{\mathpunct{.}\,}
\newcommand{\speak}[1]{\ulcorner\text{\textnormal{#1}}\urcorner}
\newcommand{\Ll}{\vcentcolon\Longleftrightarrow}
\newcommand{\notat}[1]{{!#1}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\lhra}{\ensuremath{\lhook\joinrel\relbar\joinrel\rightarrow}}
\newcommand{\hra}{\hookrightarrow}
\newcommand{\brak}[1]{{\llbracket{#1}\rrbracket}}
\newcommand{\ie}{i.\,e.\@\xspace}
\newcommand{\eg}{e.\,g.\@\xspace}
\newcommand{\vs}{vs.\@\xspace}
\newcommand{\resp}{resp.\@\xspace}
\newcommand{\inv}{inv.\@}
\newcommand{\notnot}{\emph{not not}\xspace}
\newcommand{\dd}{{\vee\!\!\!\vee}}

\newcommand{\XXX}[1]{\textbf{XXX: #1}}

\newcommand{\defeq}{\vcentcolon=}
\newcommand{\defequiv}{\vcentcolon\equiv}
\newcommand{\seq}[1]{\mathrel{\vdash\!\!\!_{#1}}}

\newcommand{\stackhref}[1]{\href{http://stacks.math.columbia.edu/tag/#1}{#1}}

\title{A quickstart guide to derived functors}
\author{Ingo Blechschmidt}
\email{iblech@web.de}

\DeclareRobustCommand{\SkipTocEntry}[5]{}

\begin{document}

\maketitle

\tableofcontents

\addtocontents{toc}{\SkipTocEntry}
\section*{References}

Standard textbooks on homological algebra include:
\begin{itemize}
\item Weibel. \emph{An Introduction to Homological Algebra.}
\item Gelfand, Manin. \emph{Methods of Homological Algebra.}
\end{itemize}

Beware of mathematical typos in the latter.
For a comprehensive reference, turn to the \emph{Stacks Project}, and don't
forget to check \emph{MathOverflow} in case of questions.

\section{Abelian categories}
\sectionsummary{Definition \textbullet{} examples \textbullet{} diagram chasing
\textbullet{} uses \textbullet{} (half-)exact functors}

\begin{itemize}
\item Definition
\item Examples
\item Counter examples
\item Diagram chases
\item Uses: category of coefficient objects, source and target of functors to
derive
\item Exact functors: classical and finite limit definition, in footnote: what,
if one doesn't start with \emph{short} exact sequences?
\end{itemize}

\section{Injectives and projectives}
\sectionsummary{Definition \textbullet{} examples \textbullet{} uses}

For the theory of derived functors, injective and projective objects are very
important. We'll discuss why below.

\begin{defn}An object~$I$ of an abelian category is \emph{injective} if and
only if, for any monomorphism~$X \hookrightarrow Y$ and any morphism~$X \to
I$, there exists a lift of that morphism to~$Y$.
\[ \xymatrix{
  0 \ar[r] & X \ar@{^{(}->}[r] \ar[d] & Y \ar@{-->}[ld] \\
  & I
} \]
Dually, an object~$P$ is \emph{projective} if and only if, for any
epimorphism~$X \twoheadrightarrow Y$ and any morphism~$P \to X$, there exists a
co-lift of that morphism to~$Y$.
\[ \xymatrix{
   X \ar@{->>}[r] & Y \ar[r] & 0 \\
  & P \ar[u] \ar@{-->}[lu]
} \]
\end{defn}

Note that no uniqueness of the lifts is required.

\begin{ex}In the category of vector spaces over some field, assuming the axiom
of choice, any object~$I$ is injective: Simply take a basis of~$X$, extend it to a
basis of~$Y$, and define~$Y \to I$ by zero on the extended zero. This gives
further indication that categories of vector spaces are not very interesting
from a homological point of view.\end{ex}

\begin{ex}\emph{Baer's criterion} states that in the category of abelian
groups, assuming the axiom of choice, a group~$G$ is injective if and only if
it is \emph{divisible}, \ie if for any~$x \in G$ and~$n \geq 1$ there exists an
element~$y \in G$ such that~$x = ny$.\footnote{The ``only if'' direction is
easy: Let~$x \in G$ and~$n \geq 1$. Then consider the injective map~$\ZZ
\xrightarrow{n} \ZZ$. The sought element~$y$ can be obtained as the image
of~$1$ under a lift of the map~$\ZZ \to G,\,1 \mapsto x$.} For example, the
groups~$\QQ$ and~$\QQ/\ZZ$ are injective.
\end{ex}

Injective objects are generally regarded as huge, unwieldy objects. They are
important for the theory, but no practical calculations are made with them.
Projective objects, on the other hand, are often much more accessible. This is
of course a purely social statement, since the injective objects in an abelian
category~$\A$ are precisely the projective objects in~$\A^\op$.

\begin{ex}In the category of modules over some ring, any finite free module~$P$ is
projective: Choose a basis of~$P$ and pick preimages under~$X
\twoheadrightarrow Y$ of the images of the basis vectors in~$Y$. Use these
preimages to define the co-lift~$P \to X$. More generally, assuming the axiom
of choice, any (not necessarily finite) free module is projective. The precise
characterization is that a module is projective if and only if it is a direct
summand of a free module.\footnote{The relationship to other properties
of~$R$-modules is as follows: \\
\[ \xymatrixcolsep{5pc}\xymatrix{
  \text{free} \ar@/^1pc/@{=>}[r] &
  \text{projective} \ar@/^1pc/@{=>}[r] \ar@/^1pc/@{==>}[l]^{\text{$R$ local
  or $R$ PID}} &
  \text{flat} \ar@/^1pc/@{=>}[r] \ar@/^1pc/@{==>}[l]^{\text{$R$ perfect}} &
  \text{torsionfree} \ar@/^1pc/@{==>}[l]^{\text{$R$ Dedekind domain}}
} \]}\end{ex}

\begin{ex}Assuming the axiom of choice, any vector space is free and thus
projective.\end{ex}

\begin{ex}An easy example of a projective module which is not free is
the~$\ZZ/(6)$-module~$\ZZ/(2)$. It is projective because there is the direct sum
decomposition $\ZZ/(6) \cong \ZZ/(2) \oplus \ZZ/(3)$. It is not free because
its number of elements is not a multiple of~$6$.\end{ex}

\begin{ex}Let~$\mmm = (3, 1 + \sqrt{-5})$ be the famous example of an ideal
of~$R = \ZZ[\sqrt{-5}]$ which is locally, but not globally principal.
Then~$\mmm$ is projective but not free.\end{ex}

\begin{ex}By the
\href{http://ncatlab.org/nlab/show/Serre-Swan+theorem}{\emph{Serre--Swan
theorem}}, vector bundles provide a systematic source of projective modules.
Let~$M$ be a module over a ring~$R$. Then the induced quasicoherent
module~$M^\sim$ on~$\Spec A$ is a vector bundle (\ie a finite free sheaf of
modules) if and only if~$M$ is projective and finitely generated. It is a
trivial bundle if and only if~$M$ is finite free. There is an analogous
relation in the smooth setting: The category of smooth vector bundles on a
compact manifold~$M$ is, by taking global sections, equivalent to the category
of finitely generated projective modules over~$\C^\infty(M)$.
\end{ex}

The reason why injective and projective objects are important in homological
algebra is that they \emph{have great exactness properties}. The following
lemma makes one of this properties precise. Injective and projective objects
thus form the building blocks by which other objects are \emph{resolved by} --
see the next section.

\begin{lemma}Let~$F : \A \to \B$ be an additive functor between abelian
categories. Let~$X^\bullet$ be a bounded below complex of injective objects or
a bounded above complex of projective objects. If~$X^\bullet$ is acyclic,
then~$F(X^\bullet)$ is acyclic as well~(!).\end{lemma}

Note that the statement is totally false without the injectivity or
projectivity assumption.

\begin{proof}One can show that that such a complex is homotopy equivalent to
the zero complex. Any additive functor preserves homotopy equivalences.
Therefore the image complex is too homotopy equivalent to zero and in
particular acyclic.

The already interesting special case of three-term complexes, \ie short exact
sequences, can be proved by a simpler argument: If~$0 \to A \to B \to C \to 0$
is a short exact sequence with~$A$ injective or~$C$ projective, one can
construct a retraction of~$A \to B$ respectively a section of~$B \to C$.
Therefore the sequence splits. The claim follows since additive functors
preserve biproducts.\end{proof}

\begin{itemize}
\item Check statement about vector bundles
\end{itemize}

\section{Resolutions}
\sectionsummary{Definition \textbullet{} examples \textbullet{} interpretation
\textbullet{} uses}

\begin{defn}An \emph{injective resolution} of an object~$X$ in an abelian
category is an exact sequence of the form~$0 \to X \to I^0 \to I^1 \to \cdots$,
where the objects~$I^n$ are all injective. A short notation is~$0 \to X \to
I^\bullet$. Dually, a \emph{projective resolution} is an exact
sequence~$P^\bullet \to X \to 0$ with the~$P^{-n}$,~$n \geq 0$, projective.
\end{defn}

\begin{ex}\label{ex:syzygies-resolution}Let~$M$ be an~$A$-module. Picking some
set of generators, we obtain a surjective map~$A^{(I)} \twoheadrightarrow M$.
If the chosen family is linearly independent, this map is an isomorphism and~$0
\to A^{(I)} \twoheadrightarrow M \to 0$ is a projective resolution of~$M$.
(Recall that free modules are projective, assuming the axiom of choice.) But in
general, the \emph{module of relations}~$K_0$, the kernel of~$A^{(I)}
\twoheadrightarrow M$, will be nontrivial. Picking generators for~$K_0$, we
obtain a surjective map~$A^{(J)} \twoheadrightarrow K_0$ which we can compose
with the inclusion~$K_0 \hookrightarrow A^{(I)}$. In this way, the top row in
the diagram
\[ \xymatrixcolsep{1pc}\xymatrix{
  A^{(J)} \ar[rr] \ar@{->>}[rd] & & A^{(I)} \ar@{->>}[rr] && M \ar[r] & 0 \\
  & K_0 \ar@{^{(}->}[ru]
} \]
is exact. If the chosen generators for~$K_0$ are linearly independent, we can
tack the zero module at the front and obtain in this manner a projective
resolution of~$M$. But in general, there will be nontrivial relations between
the chosen generators -- \emph{second syzygies} -- and even higher syzygies.
Therefore we have to repeat this process ad infinitum.
\[ \xymatrixcolsep{1pc}\xymatrix{
  \cdots \ar[rr] && A^{(K)} \ar@{->>}[rd] \ar[rr] && A^{(J)} \ar[rr] \ar@{->>}[rd] & & A^{(I)} \ar@{->>}[rr] && M \ar[r] & 0 \\
  & \cdots \ar@{^{(}->}[ru] && K_1 \ar@{^{(}->}[ru] && K_0 \ar@{^{(}->}[ru]
} \]
\end{ex}

\begin{ex}\label{ex:res-z2}A projective resolution of
the~$\ZZ$-module~$\ZZ/(2)$, obtained by the method just sketched, is~$0 \to \ZZ
\stackrel{2}{\to} \ZZ \to \ZZ/(2) \to 0$.
\end{ex}

\begin{ex}\emph{Koszul resolutions} are an important source of resolutions in
algebraic geometry. Let~$f_1,\ldots,f_r$ be a \emph{regular
sequence} of elements of some ring~$A$.\footnote{This means that~$f_1$ is
regular in~$A$, $f_2$ is regular in~$A/(f_1)$, $f_3$ is regular
in~$A/(f_1,f_2)$ and so on. A ring element~$s$ is \emph{regular} if and only if
multiplication by~$s$ is injective. If~$A$ is a ring of functions, for
instance~$A = k[x,y]$, regularity of the sequence is intuitively a requirement on the
equations~``$f_1=0,\ldots,f_n=0$'' to be independent.} Denote by~$\Lambda^n M$
the~$n$-th exterior power of~$M$. Then~$\Lambda^\bullet A^r \to
A/(f_1,\ldots,f_r) \to 0$ is a free resolution. The
differential sends~$\vec v_1 \wedge \cdots \wedge \vec v_n$ to~$\sum_{i=0}^r
(-1)^i (\vec v \cdot \vec f)\, \vec v_1 \wedge \cdots \wedge \widehat{\vec v_i}
\wedge \cdots \wedge \vec v_n$ (scalar product). Switching toposes, Koszul
resolutions can be used to construct locally free resolutions of structure
sheaves of closed subschemes.
\end{ex}

We can think of a projective resolution~$P^\bullet \to X \to 0$ as providing us
with successively improving approximations: A zeroth approximation of~$X$
is~$P^0$. But this disregards possible relations between the generators (we are
employing a module-theoretic metaphor here), so a better approximation
is~``$P^0 - P^{-1}$''. If there are relations between the relations, we subtract
too much in this expression; an even better approximation is~``$P^0 - P^{-1} +
P^{-2}$''. Taking all the higher corrections into account, we obtain the
symbolic identity~``$X = P^0 - P^{-1} \pm \cdots$''.\footnote{The arithmetic
operations with objects should be conceived in a purely figurative
way. But in fact, there is a way to make these calculations completely
rigorous. Namely, we can attach to any abelian category~$\A$ a very nice
invariant, its \emph{K-theory group}~$K(\A)$ (also called \emph{Grothendieck
group}). It is the abelian group freely generated by the objects of~$\A$ modulo
the relation~$X = X' + X''$ for any short exact sequence~$0 \to X' \to X \to
X'' \to 0$ in~$\A$. One can then check that, if~$P^\bullet \to X \to 0$ is a
bounded resolution (projective or otherwise), the identity~$X = \sum_n (-1)^n
P^n$ holds in~$K(\A)$.

Here are four tangential remarks on the K-theory. (1)~The
map~$(\A,{\oplus})\to(K(\A),{+})$ is the \emph{universal additive invariant}
of~$\A$. (2)~For a bounded complex~$X^\bullet$, one can define its \emph{Euler
characteristic} as~$\chi(X^\bullet) \defeq \sum_n (-1)^n X^n \in K(\A)$.
Denoting by~$H^\bullet(X^\bullet)$ its associated cohomology complex (with zero
differentials), one can check that~$\chi(X^\bullet) =
\chi(H^\bullet(X^\bullet))$. (3)~The K-theory of the category of vector spaces
over some field is zero, by the \emph{Eilenberg--Mazur swindle}. The K-theory
of the category of finite-dimensional vector spaces is~$\ZZ$, by associating to
a vector space its dimension. (4)~The K-theory group of the category of
coherent sheaves of modules on a scheme carries important information about the
intersection theory of the scheme.}

\begin{defn}An abelian category is said to have \emph{enough injectives} if and
only if for any object~$X$ there exists a monomorphism~$X \hookrightarrow I$
into an injective object, \ie if any object can be embedded into an injective
object. Dually, an abelian category has \emph{enough
projectives} if and only if any object is a quotient of a projective
object.\end{defn}

\begin{lemma}Let~$\A$ be an abelian category with enough injectives or enough
projectives. Then any object possesses an injective respectively a projective
resolution.\end{lemma}
\begin{proof}The method sketched in Example~\ref{ex:syzygies-resolution}
depended only on the fact that any module admits a surjection from a free
module. This fact can be substituted by the hypothesis on the existence of
enough projectives. The statement about injective resolutions is the formal
dual.\end{proof}

\begin{rem}Let~$\A$ be an abelian category with enough injectives and
projectives. We say that its \emph{homological dimension}~$\leq n$ if and only
if any object possesses a projective (equivalently, injective) resolution of
length~$n$, \ie comprising objects~$P^0$ to~$P^{-n}$.\footnote{The equivalence
is not entirely trivial. One can use the common \emph{dimension shifting trick}
and the characterization of injective objects as those objects~$I$ such
that~$\Ext^1(T,I) = 0$ for all objects~$T$; dually, an object~$P$ is projective
if and only if~$\Ext^1(P,T) = 0$ for alle objects~$T$.} The homological
dimension is one way to measure the homological complexity of a category. For
instance, the category of vector spaces over a field has homological dimension
zero, since any object is projective (and injective). More generally, there is
an intriguing relation between the homological dimension of the category of
modules over a ring and its Krull dimension: If the ring is a \emph{regular
ring}, they coincide. For instance, the homological dimension of the category
of~$k[x_1,\ldots,x_n]$-modules, where~$k$ is a field, is~$n$. Relatedly, the
category of coherent sheaves on a smooth projective variety of
dimension~$n$ has homological dimension~$n$.
\end{rem}

The following lemma investigates the functorial properties of injective and
projective resolutions.

\begin{lemma}\label{lemma:inj-funct}Let~$0 \to X \to I^\bullet$ be a resolution
by arbitrary objects in an abelian category. Let~$0 \to Y \to J^\bullet$ be a
resolution by injective objects. Let~$f : X \to Y$ be a morphism. Then there
exists a lift of~$f$ to the resolutions, \ie a morphism~$I^\bullet \to
J^\bullet$ of complexes compatible with the maps~$X \to I^0$ and~$Y \to J^0$.
Furthermore, this lift is unique up to homotopy.
\[ \xymatrix{
  0 \ar[r] & X \ar[r]\ar[d] & I^0 \ar[r]\ar@{-->}[d] & I^2 \ar[r]\ar@{-->}[d] & \cdots \\
  0 \ar[r] & Y \ar[r] & J^0 \ar[r] & J^2 \ar[r] & \cdots
} \]
\end{lemma}
\begin{proof}We obtain a morphism~$I^0 \to J^0$ by lifting the morphism~$X \to
Y \to J^0$ along the monomorphism~$X \to I^0$. This is possible by the
injectivity of~$J^0$. The induction step is a bit more complicated.
\end{proof}

\begin{cor}\label{cor:inj-he}Any two injective resolutions of an object are
homotopy equivalent.\end{cor}
\begin{proof}Let~$0 \to X \to I^\bullet$ and~$0 \to X \to J^\bullet$ be
injective resolutions. By the previous lemma, the identity~$\id_X : X \to X$ lifts to
morphisms~$I^\bullet \to J^\bullet$ and~$J^\bullet \to I^\bullet$. The
composition of these lifts is a lift of~$\id_X$ to~$I^\bullet \to I^\bullet$
respectively~$J^\bullet \to J^\bullet$. By the uniqueness statement, these
compositions are homotopic to the identity, since~$\id_{I^\bullet}$
respectively~$\id_{J^\bullet}$ are trivially lifts of~$\id_X$.\end{proof}

\emph{Injective resolutions allow us to replace badly behaved
objects by (complexes of) injective objects,} which, thanks to their great
exactness properties, mix much better with additive functors. This is the
reason why injective (and dually, projective) resolutions are important. No
information about morphisms is lost in this process, since morphisms between
objects lift to morphisms between resolutions.

For future reference, we want to precisely state the relation between an
object~$X$ -- considered as a complex~$X[0]$ concentrated in degree zero -- and
an associated injective resolution~$I^\bullet$. Namely, the augmentation~$X \to
I^0$ gives rise to a morphism~$X[0] \to I^\bullet$ of complexes which is
a \emph{quasi-isomorphism} by the following definition.

\begin{defn}A morphism of complexes~$K^\bullet \to L^\bullet$ is a
\emph{quasi-isomorphism} if the induced morphisms~$H^n(K^\bullet) \to
H^n(L^\bullet)$ in cohomology are isomorphisms for all~$n$.\footnote{Note that
if~$K^\bullet \to L^\bullet$ is a quasi-isomorphism, there is usually no
quasi-isomorphism in the opposite direction. For instance, there is no
quasi-isomorphism~$(\ZZ/(2))[0] \to P^\bullet$ when~$P^\bullet \to \ZZ/(2) \to
0$ is the projective resolution of Example~\ref{ex:res-z2}. Accordingly, we say
that two complexes~$K^\bullet$ and~$L^\bullet$ are \emph{quasi-isomorphic} not
when there exists a quasi-isomorphism between them, but when there exists a
\emph{zigzag} of quasi-isomorphisms~$K^\bullet \to Z_0^\bullet \leftarrow
Z_1^\bullet \to Z_2^\bullet \leftarrow \cdots \to Z_n^\bullet \leftarrow
Y^\bullet$. This complication is a source of technical difficulties. Note that to say
that~$K^\bullet$ and~$L^\bullet$ are quasi-isomorphic is slightly stronger than
to say that they have isomorphic cohomology. In the latter case, there is no
guarantee that the isomorphisms are induced by a (zigzag of) morphisms of
complexes.}
\end{defn}

\section{Derived functors}
\sectionsummary{Definition \textbullet{} well-definedness \textbullet{} examples
\textbullet{} long exact sequence \textbullet{} uses}

\begin{defn}Let~$F : \A \to \B$ be a left-exact functor between abelian
categories. Assume that~$\A$ has enough injectives. Then~$\RR F(X)$, the
\emph{total right-derived functor of~$F$} evaluated at an object~$X$ of~$\A$,
is the complex
\[ \RR F(X){:}\quad \cdots \to 0 \to F(I^0) \to F(I^1) \to \cdots, \]
where~$0 \to X \to I^\bullet$ is an injective resolution of~$X$. The
\emph{$n$-th right-derived functor of~$F$} evaluated at~$X$ is the~$n$-th
cohomology of this complex:
$R^n F(X) \defeq H^n(\RR F(X)) = H^n(F(I^\bullet))$.
\end{defn}

So, to calculate~$R^n F(X)$, we take an injective resolution of~$X$, apply~$F$
to this complex (be sure to strip the leading~``$F(X)$''), and then take
cohomology. Note that, even though the complex~$I^\bullet$ is not acyclic only
at position zero, the complex~$F(I^\bullet)$ may have cohomology in arbitrary
high degrees~(!). There is an analogous definition for the left-derived
functors of right-exact functors, using projective instead of injective
resolutions.

Since we made the arbitrary choice of an injective resolution, we have to
discuss well-definedness of course. If~$0 \to X \to J^\bullet$ is a second
injective resolution, there is a homotopy equivalence~$I^\bullet \simeq
J^\bullet$ by Corollary~\ref{cor:inj-he}. This equivalence is preserved by the
functor~$F$, so the complexes~$F(I^\bullet)$ and~$F(J^\bullet)$ are homotopy
equivalent as well. In particular, they are quasi-isomorphic and have
isomorphic cohomology.

Summing up, the complex~$\RR F(X)$ is well-defined up to quasi-isomorphism and~$R^n F(X)$
is well-defined up to isomorphism. For reasons to be stated below, we don't
want to stress that with our definition,~$\RR F(X)$ is actually even
well-defined up to homotopy equivalence.

Suppose we fix an injective resolution for every object of~$\A$. Then the rule~$X
\mapsto R^n F(X)$ can be made into an additive functor~$R^n F : \A \to \B$,
since a morphism~$X \to Y$ between objects induces, by Lemma~\ref{lemma:inj-funct}, a morphism between their
associated injective resolutions (unique up to homotopy) and
therefore a well-defined morphism~$R^n F(X) \to R^n F(Y)$.

Different choices of resolutions lead to naturally isomorphic right-derived
functors.

\begin{ex}We have~$R^0 F(X) \cong F(X)$, naturally in~$X$. To verify this, pick
an injective resolution~$0 \to X \to I^\bullet$ and apply~$F$ to
the exact sequence~$0 \to X \to I^0 \to I^1$.
\end{ex}

It is in this sense that the~$R^n F$ are ``derived'' functors of~$F$; $R^0 F$
coincides with~$F$ and the higher derived functors bear some relation with~$F$.
But note that~$R^{n+1} F$ is \emph{not} the first derived functor of~$R^n F$
(indeed, in general the higher derived functors are neither left- nor
right-exact, so we cannot derive~$R^n F$) and that there is no Leibniz rule to
be found.

\begin{ex}Assume~$F$ to even be exact. Then the higher derived functors of~$F$
vanish, \ie~$R^n F(X) = 0$ for all objects~$X$ and~$n > 0$. To verify this, use
Lemma~\ref{lemma:exact-functor-acyclic}.\end{ex}

This suggests the following motto: \emph{Derived functors measure the
failure of a functor to be exact.}

\begin{ex}Consider the dualization functor~$F : \Ab^\op \to \Ab,\,M \mapsto
\Hom(M,\ZZ)$. Since~$F$ is an instance of a Hom functor, it is left-exact. To
ensure that the contravariance doesn't cause unnecessary difficulties, we spell
out precisely what this means: If~$0 \to M \to N \to P \to 0$ is a short exact
sequence in~$\Ab^\op$ (this really means that we have a short exact sequence~$0
\leftarrow M \leftarrow N \leftarrow P \leftarrow 0$ in~$\Ab$), then~$0 \to F(M) \to F(N) \to
F(P)$ is exact in~$\Ab$. To compute~$\RR F(\ZZ/(2))$, we use the projective
(even free) resolution
\[ 0 \lra \ZZ \stackrel{2}{\longrightarrow} \ZZ \lra \ZZ/(2) \lra 0, \]
which corresponds to an injective resolution in~$\Ab^\op$. The total derived
functor is therefore the complex
\[ 0 \lra F(\ZZ) \stackrel{2}{\longrightarrow} F(\ZZ) \lra 0, \]
which can be simplified using~$F(\ZZ) \cong \ZZ$ to
\[ 0 \lra \ZZ \stackrel{2}{\longrightarrow} \ZZ \lra 0. \]
Thus we obtain~$R^0 F(\ZZ) \cong F(\ZZ) = 0$ and~$R^1 F(\ZZ) \cong \ZZ/(2)$.
Note that the torsion did not vanish, but instead moved to~$R^1$.
\end{ex}

Many important functors are derived functors. For instance,
\begin{itemize}
\item the right derived functors of~$\Hom(X, \placeholder) : \A^\op \to
\Ab$ are the \emph{Ext functors} $\Ext^n(X, \placeholder)$,
\item the left derived functors of~$M \otimes_A \placeholder : \Mod(A) \to \Ab$
are the \emph{Tor functors} $\Tor_n(M, \placeholder)$,
\item the right derived functors of the global sections functor~$\Gamma :
\AbSh(X) \to \Ab$ calculate \emph{sheaf cohomology}, and
\item the right derived functors of the functor~$\Mod(G) \to \Ab$ which associates to
a~$G$-module its subset of~$G$-invariant elements calculate \emph{group
cohomology}.
\end{itemize}

The raison d'être for derived functors is given by the following lemma.

\begin{lemma}Let~$F : \A \to \B$ be a left-exact functor between abelian
categories. Assume that~$\A$ has enough injectives. Then, for any short exact
sequence~$0 \to X \to Y \to Z \to 0$ in~$\A$, there is an induced long exact
sequence
\[ 0 \to F(X) \to F(Y) \to F(Z) \to R^1 F(X) \to R^1 F(Y) \to R^1 F(Z) \to R^2
F(X) \to \cdots, \]
depending functorially on the short exact sequence.\end{lemma}
\begin{proof}Use the \emph{horseshoe lemma} to obtain a short exact sequence
relating injective resolutions of~$X$, $Y$, and~$Z$. Then perform the usual
diagram chase to construct the connecting morphisms.\end{proof}

Note that the lemma shows very visibly that~$F$ is exact if and only if~$R^1 F
= 0$.

In practice, calculating the higher derived functors can be quite hard. There
are two main techniques: One can use exact sequences (and spectral sequences)
to draw some conclusions about the derived functors, or hope that there are
more amenable resolutions than resolutions by unwieldy injectives available. To
this end, the following lemma is crucial:

\begin{lemma}Let~$F : \A \to \B$ be a left-exact functor between abelian
categories. Assume that~$\A$ has enough injectives. Let~$X$ be an object
of~$\A$. Let~$0 \to X \to U^\bullet$ be a resolution of~$X$ by
\emph{$F$-acyclic objects}, \ie objects such that~$R^{\geq 1}F(U^m) = 0$.
Then~$\RR F(X)$ is quasi-isomorphic to~$F(U^\bullet)$ and in particular~$R^n
F(X) \cong H^n(F(U^\bullet))$.\footnote{Note that~$\RR F(X)$ will in general
\emph{not} be homotopy equivalent to~$F(U^\bullet)$. This is the reason why we
identify~$\RR F(X)$ up to quasi-isomorphism and not up to homotopy equivalence.}\end{lemma}

In other words, we may use resolutions by~$F$-acyclic objects instead of
injective objects to calculate the derived functors. For instance, we can use
flat resolutions to calculate~$\Tor$ and flabby resolutions to calculate sheaf
cohomology.

Derived functors can be used to fix several defects in the original functors. The
paramount defect of a non-exact functor is, of course, its failure to preserve
exactness. This is fixed by the long exact sequence. But derived
functors also fix the failure of certain identities. For instance, if~$M$ is an
arbitrary~$A$-module, in general it does not hold that
\[ M^{\vee\vee} \defeq \Hom(\Hom(M,A),A) \cong M. \]
But, denoting by~$(\placeholder)^{\dd}$ the total derived functor of the
dualization functor, the complex~$M^{\dd\dd}$ \emph{is} quasi-isomorphic to~$M$
(regarded as a complex concentrated in degree zero).\footnote{We are skating
over some details here. In particular, we have not explained how to apply~$\RR
F$ to a complex~$K^\bullet$ (instead of a single object); this is done by
finding a quasi-isomorphism~$K^\bullet \to I^\bullet$ to a complex consisting
of injectives and setting~$\RR F(K^\bullet) \defeq F(I^\bullet)$. Also one has
to impose some finiteness restrictions, for instance~$A$ should be Noetherian
and~$M$ finitely generated.} Similarly, in algebraic geometry, there is the
\emph{projection formula}
\[ \pi_*\E \otimes \F \cong \pi_*(\E \otimes \pi^*\G), \]
valid in the case that~$\G$ is a locally free sheaf.
For the derived functors, the formula holds in complete generality, assuming
only some finiteness conditions:
\[ \RR\pi_*(\E^\bullet) \otimes^\LL \F^\bullet \simeq_\text{qis}
\RR\pi_*(\E^\bullet \otimes^\LL \LL\pi^*\G^\bullet). \]


\begin{itemize}
\item somewhere: ``complexes good, cohomology bad'', example from homotopy theory
\end{itemize}

\section{Example: Ext}
\sectionsummary{Definition \textbullet{} lifting problems \textbullet{}
extensions}

\begin{itemize}
\item Lifting problems
\item Extensions (give correspondence in footnote)
\end{itemize}

\section{Example: Sheaf cohomology}
\sectionsummary{Definition \textbullet{} comparison with singular cohomology
\textbullet{} uses}

\begin{itemize}
\item Resolution of $\underline{\RR}$
\item Comparison with singular cohomology
\item Paucity of projective sheaves
\item Example: section-wise surjectivity
\item Uninteresting: $\C^\infty$-modules
\end{itemize}

\section{Outlook}
\sectionsummary{Unbounded complexes \textbullet{} derived categories
\textbullet{} model categories}

\begin{itemize}
\item Unbounded resolutions
\item Derived categories: definition, composition of derived functors,
$D^b(X)$ $f^!$
\item Model categories: $\mathrm{sAb} \simeq \mathrm{Kom}^{\leq
0}(\mathrm{Ab})$
\end{itemize}

\end{document}
