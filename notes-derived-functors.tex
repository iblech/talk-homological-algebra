\documentclass{amsart}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{etex}
\usepackage{amsmath,amsthm,amssymb,stmaryrd,color,graphicx,multirow}
\usepackage{mathtools}
\usepackage{xspace}
\usepackage[protrusion=true,expansion=true]{microtype}
\usepackage{hyperref}
\usepackage[all]{xy}

\usepackage{shadethm}
\setlength{\shadeboxsep}{6pt}
\setlength{\shadeleftshift}{-\shadeboxsep}
\setlength{\shaderightshift}{-\shadeboxsep}

% http://tex.stackexchange.com/a/146081
\usepackage{etoc}
\etocsetlevel{sectionsummary}{2}
\newcommand*{\sectionsummary}[1]{\etoctoccontentsline{sectionsummary}{#1}}
\etocsettocstyle{}{}
\etocsetstyle{section}{\normalfont}{\numberline{\etocnumber}\etocname}{\hfill\etocpage\par}{}
\etocsetstyle{sectionsummary}{\hskip1.74em}{\textit{\small\etocname}}{\par\vskip-0.5em}{}

\usepackage{mathpazo}
\linespread{1.05}

\theoremstyle{definition}
\newtheorem{defn}{Definition}[section]
\newtheorem{ex}[defn]{Example}
\newtheorem{non-ex}[defn]{Non-example}

\theoremstyle{plain}

\newtheorem{prop}[defn]{Proposition}
\newtheorem{cor}[defn]{Corollary}
\newtheorem{lemma}[defn]{Lemma}
\newtheorem{thm}[defn]{Theorem}

\theoremstyle{remark}
\newtheorem{rem}[defn]{Remark}

\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\FF}{\mathbb{F}}
\renewcommand{\AA}{\mathbb{A}}
\newcommand{\A}{\mathcal{A}}
\newcommand{\B}{\mathcal{B}}
\newcommand{\C}{\mathcal{C}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\E}{\mathcal{E}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\G}{\mathcal{G}}
\renewcommand{\H}{\mathcal{H}}
\renewcommand{\O}{\mathcal{O}}
\newcommand{\K}{\mathcal{K}}
\newcommand{\N}{\mathcal{N}}
\newcommand{\M}{\mathcal{M}}
\renewcommand{\L}{\mathcal{L}}
\renewcommand{\P}{\mathcal{P}}
\newcommand{\R}{\mathcal{R}}
\newcommand{\I}{\mathcal{I}}
\newcommand{\J}{\mathcal{J}}
\renewcommand{\S}{\mathcal{S}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\LL}{\mathbb{L}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\GG}{\mathbb{G}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\aaa}{\mathfrak{a}}
\newcommand{\ppp}{\mathfrak{p}}
\newcommand{\mmm}{\mathfrak{m}}
\newcommand{\nnn}{\mathfrak{n}}
\newcommand{\Ext}{\mathrm{Ext}}
\newcommand{\Tor}{\mathrm{Tor}}
\newcommand{\Kom}{\mathrm{Kom}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\HOM}{\mathcal{H}\mathrm{om}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\GL}{\mathrm{GL}}
\newcommand{\placeholder}{\underline{\ \ \ }}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\Set}{\mathrm{Set}}
\newcommand{\Grp}{\mathrm{Grp}}
\newcommand{\Vect}{\mathrm{Vect}}
\newcommand{\Sh}{\mathrm{Sh}}
\newcommand{\PSh}{\mathrm{PSh}}
\newcommand{\Zar}{\mathrm{Zar}}
\newcommand{\Sch}{\mathrm{Sch}}
\newcommand{\Ab}{\mathrm{Ab}}
\newcommand{\AbSh}{\mathrm{AbSh}}
\newcommand{\Mod}{\mathrm{Mod}}
\newcommand{\Alg}{\mathrm{Alg}}
\newcommand{\Ring}{\mathrm{Ring}}
\newcommand{\LRL}{\mathrm{LRL}}
\newcommand{\pt}{\mathrm{pt}}
\newcommand{\tors}{\mathrm{tors}}
\DeclareMathOperator{\Spec}{Spec}
\newcommand{\QcohSpec}[2]{\mathrm{Spec}^{\mathrm{qcoh}}_{#1}{#2}}
\newcommand{\RelSpec}[2]{\mathrm{RelSpec}_{#1}{#2}}
\newcommand{\op}{\mathrm{op}}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\Clos}{cl}
\DeclareMathOperator{\Image}{im}
\DeclareMathOperator{\Kernel}{ker}
\DeclareMathOperator{\Cokernel}{cok}
\DeclareMathOperator{\supp}{supp}
\newcommand{\Ass}{\mathrm{Ass}}
\newcommand{\Open}{\mathrm{Op}}
\newcommand{\?}{\,{:}\,}
\renewcommand{\_}{\mathpunct{.}\,}
\newcommand{\speak}[1]{\ulcorner\text{\textnormal{#1}}\urcorner}
\newcommand{\Ll}{\vcentcolon\Longleftrightarrow}
\newcommand{\notat}[1]{{!#1}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\lhra}{\ensuremath{\lhook\joinrel\relbar\joinrel\rightarrow}}
\newcommand{\hra}{\hookrightarrow}
\newcommand{\brak}[1]{{\llbracket{#1}\rrbracket}}
\newcommand{\ie}{i.\,e.\@\xspace}
\newcommand{\eg}{e.\,g.\@\xspace}
\newcommand{\vs}{vs.\@\xspace}
\newcommand{\resp}{resp.\@\xspace}
\newcommand{\inv}{inv.\@}
\newcommand{\notnot}{\emph{not not}\xspace}
\newcommand{\dd}{{\vee\!\!\!\vee}}
\newcommand{\ip}{\cdot}

\newcommand{\XXX}[1]{\textbf{XXX: #1}}

\newcommand{\defeq}{\vcentcolon=}
\newcommand{\defequiv}{\vcentcolon\equiv}
\newcommand{\seq}[1]{\mathrel{\vdash\!\!\!_{#1}}}

\newcommand{\stackhref}[1]{\href{http://stacks.math.columbia.edu/tag/#1}{#1}}

\title{A quickstart guide to derived functors}
\author{Ingo Blechschmidt}
\email{iblech@web.de}
%\date{\today}

\DeclareRobustCommand{\SkipTocEntry}[5]{}

\begin{document}

\begin{abstract}These notes give an informal exposition of the basic
theory on derived functors. They are aimed at students who have seen~$\Ext$
or~$\Tor$ appearing once or twice and want to know more about those derived
functors. We conclude with a short outlook on the modern formalism of
derived categories.
No prior knowledge of homological algebra is assumed. However, one
should be familiar with exact sequences and chain complexes, as
for instance provided by a first course on algebraic topology.
\end{abstract}

\vspace*{-1.5em}
\maketitle
\thispagestyle{empty}

\addtocontents{toc}{\SkipTocEntry}
\section*{In a nutshell}

\small
Let~$F : \A \to \B$ be a left-exact functor between abelian categories (for
instance, categories of modules). Let~$0 \to X \to Y \to Z \to 0$ be a short
exact sequence in~$\A$. Then the induced sequence~$0 \to FX \to FY \to FZ$ is
only exact at the first two terms, the morphism~$FY \to FZ$ may fail to be an
epimorphism. It is therefore a natural question how to extend this sequence on the
right to obtain an exact sequence. We could, of course, simply tack the
cokernel of~$FY \to FZ$ at the end; but there is a better way, given by the
\emph{right-derived functors} of~$F$: There is a long exact sequence
\[ 0 \to F(X) \to F(Y) \to F(Z) \to R^1F(X) \to R^1F(Y) \to R^1F(Z) \to
R^2F(X) \to \cdots \]
depending functorially on the given short exact sequence. Note that this way,
only the map~$F(Z) \to R^1F(X)$, but not the object~$R^1 F(X)$, depends on~$Y$ and~$Z$.
To construct~$R^n F(X)$, we pick an \emph{injective resolution}~$0 \to X \to
I^\bullet$ of~$X$ and set~$R^n F(X) \defeq H^n(F(I^\bullet))$.

\vfill
\normalsize

\addtocontents{toc}{\SkipTocEntry}
\section*{Contents}
\vskip-1.5em

\tableofcontents

\addtocontents{toc}{\SkipTocEntry}
\section*{References}

Standard textbooks on homological algebra include:
\begin{itemize}
\item Weibel. \emph{An Introduction to Homological Algebra.}
\item Gelfand, Manin. \emph{Methods of Homological Algebra.}
\end{itemize}

Beware of mathematical typos in the latter.
For a comprehensive reference, turn to the \emph{Stacks Project}, and don't
forget to check \emph{MathOverflow} in case of questions.

\section{Abelian categories}
\sectionsummary{Definition \textbullet{} examples \textbullet{} diagram chasing
\textbullet{} uses \textbullet{} (half-)exact functors}

\begin{ex}The prototypical example of an abelian category is the category of
abelian groups.\end{ex}

\begin{ex}More generally, the category of modules over some ring is an abelian
category.\end{ex}

\begin{defn}An \emph{abelian category}~$\A$ is a category together with
abelian group structures on the hom-sets~$\Hom_\A(X,Y)$ such that composition
is bilinear and:
\begin{enumerate}
\item There exists a \emph{zero object}, and for any pair of objects~$X$
and~$Y$, there exists a \emph{biproduct}~$X \oplus Y$ (simultaneously a
coproduct and a product, in a compatible way).
\item For any morphism~$f : X \to Y$, there exists a \emph{kernel}~$\Kernel(f)
\hookrightarrow X$ and a \emph{cokernel}~$Y \twoheadrightarrow \Cokernel(f)$.
\item An appropriate formulation of the homomorphism theorem holds.
\end{enumerate}
\end{defn}

Of course, since one cannot naively talk about elements of arbitrary
categories, the axioms have to be formulated in a purely categorical way with
universal properties. This is entirely possible, but for the purposes of these
notes not necessary, since in any concrete abelian category which will appear here,
there will be an obvious notion of kernel and cokernel.

\begin{non-ex}The category of sets, the category of topological spaces, and the
category of all (not necessarily commutative) groups are not abelian
categories.\end{non-ex}

\begin{non-ex}The category of free abelian groups is not abelian. For instance,
the linear map~$\ZZ \to \ZZ,\,x \mapsto 2x$ doesn't have a cokernel in this
category.\end{non-ex}

\begin{non-ex}The category of Hilbert spaces and the category of Banach spaces
are not abelian. One can check that in these categories, the categorical image
of a continuous linear map is calculated as the \emph{closure} of the
set-theoretical image. Therefore the homomorphism theorem fails: For instance,
let~$\iota : U \hookrightarrow X$ be the inclusion of a linear subspace which is
not closed. Then the induced map~$U/\Kernel(\iota) \to \Image(\iota)$, \ie~$U
\to \overline{U}$, is not an isomorphism.
\end{non-ex}

\begin{ex}Let~$\A$ be an abelian category. Then the category of (cochain)
complexes in~$\A$,~$\Kom(\A)$, is an abelian category with componentwise
addition of morphisms and componentwise kernels and cokernels.\end{ex}

\begin{ex}Let~$X$ be a topological space. Then the category of sheaves of
abelian groups on~$X$,~$\AbSh(X)$, is an abelian category. The kernel of a
morphism of such sheaves is calculated as its naive presheaf kernel, its
cokernel is the sheafification of the naive presheaf cokernel.\end{ex}

Abelian categories are a natural setting for talking about exact sequences. The
usual lemmas on exact sequences, for instance the \emph{five lemma} and the
lemma on the existence of a connecting homomorphism, hold in any abelian
category. In fact, there is the following metatheorem, which is very practical
for working with abelian categories.

\begin{thm}For the purposes of performing diagram chases in an abelian
category~$\A$, we may pretend that~$\A$ is the category of modules over some
ring. In particular, we may freely employ naive element-based proofs to verify
statements about~$\A$ -- even though there need not be a notion of elements for
objects of~$\A$.\end{thm}

This can be made precise in several ways; check the \emph{Freyd--Mitchell
embedding theorem} and (the first page of) Bergman's article
\href{https://math.berkeley.edu/~gbergman/papers/unpub/elem-chase.pdf}{\emph{A
note on abelian categories -- translating element-chasing proofs, and exact
embedding in abelian groups}}. As a consequence, nothing is lost if the reader
chooses to restrict all following abelian categories to module categories.

The main use of abelian categories in homological algebra is as
\emph{categories of coefficient objects} (for taking cohomology in, for
example) and as source and target categories of functors to be derived. To this
end, the following definition is crucial.

\begin{defn}A functor~$F : \A \to \B$ between abelian categories is
\emph{additive} if and only if the induced maps~$\Hom_\A(X,Y) \to
\Hom_\B(FX,FY)$ are homomorphisms of groups.

An additive functor~$F$ is
\emph{exact} if and only if, for any short exact sequence~$0 \to X \to Y \to Z
\to 0$ in~$\A$, the induced sequence~$0 \to FX \to FY \to FZ \to 0$ is exact
in~$\B$.

It is \emph{left-exact} if at least~$0 \to FX \to FY \to FZ$ is always still
exact and \emph{right-exact} if at least~$FX \to FY \to FZ \to 0$ is
exact.\end{defn}

\begin{ex}Let~$T$ be an~$A$-module. The functor~$\Mod(A) \to \Ab,\,M
\mapsto M \otimes_A T$ is right-exact. It is exact if and only if~$T$
is flat over~$A$.\end{ex}

\begin{ex}Let~$T$ be an object of an arbitrary abelian category~$\A$. The
functor~$\A \to \Ab,\,X \mapsto \Hom_\A(T,X)$ is left-exact. (It is exact if
and only if~$T$ is a \emph{projective object}, see below.) The contravariant
Hom functor~$X \mapsto \Hom_\A(X,T)$, regarded as a covariant functor~$\A^\op
\to \Ab$, is left-exact as well. (It is exact if and only if~$T$ is
\emph{injective.})\end{ex}

A useful property of exact functors is that they \emph{commute with
cohomology}. More precisely, if~$K^\bullet$ is a chain complex in an abelian
category~$\A$, and~$F : \A \to \B$ is an exact functor, then there is a natural
isomorphism~$H^n(F(K^\bullet)) \cong F(H^n(K^\bullet))$. This is because exact
functors preserve kernels, cokernels, and images.

\begin{lemma}Let~$F : \A \to \B$ be a left-exact functor. Let~$0 \to X \to Y
\to Z$ be an exact sequence in~$\A$ (note the missing zero at the right end).
Then the induced sequence~$0 \to FX \to FY \to FZ$ is exact. The
dual statement for right-exact functors holds as well.\end{lemma}

\begin{lemma}An additive functor between abelian categories is left-exact if
and only if it preserves finite limits. It is right-exact if and only if it
preserves finite colimits.\footnote{With this lemma, left-exactness
of~$\Hom_\A(T,\placeholder)$ and of~$\Hom_\A(\placeholder,T)$ follows from
general abstract nonsense, since the set-valued Hom functors of any category
preserve limits and since limits in~$\Ab$ are calculated just as in~$\Set$.}\end{lemma}

\section{Injectives and projectives}
\sectionsummary{Definition \textbullet{} examples \textbullet{} uses}

For the theory of derived functors, injective and projective objects are very
important. We'll discuss why below.

\begin{defn}An object~$I$ of an abelian category is \emph{injective} if and
only if, for any monomorphism~$X \hookrightarrow Y$ and any morphism~$X \to
I$, there exists a lift of that morphism to~$Y$.
\[ \xymatrix{
  0 \ar[r] & X \ar@{^{(}->}[r] \ar[d] & Y \ar@{-->}[ld] \\
  & I
} \]
Dually, an object~$P$ is \emph{projective} if and only if, for any
epimorphism~$X \twoheadrightarrow Y$ and any morphism~$P \to X$, there exists a
co-lift of that morphism to~$Y$.
\[ \xymatrix{
   X \ar@{->>}[r] & Y \ar[r] & 0 \\
  & P \ar[u] \ar@{-->}[lu]
} \]
\end{defn}

Note that no uniqueness of the lifts is required.

\begin{ex}In the category of vector spaces over some field, assuming the axiom
of choice, any object~$I$ is injective: Simply take a basis of~$X$, extend it to a
basis of~$Y$, and define~$Y \to I$ on this basis. This indicates
that categories of vector spaces are not very interesting
from a homological point of view.\end{ex}

\begin{ex}\emph{Baer's criterion} states that in the category of abelian
groups, assuming the axiom of choice, a group~$G$ is injective if and only if
it is \emph{divisible}, \ie if for any~$x \in G$ and~$n \geq 1$ there exists an
element~$y \in G$ such that~$x = ny$.\footnote{The ``only if'' direction is
easy: Let~$x \in G$ and~$n \geq 1$. Then consider the injective map~$\ZZ
\xrightarrow{n} \ZZ$. The sought element~$y$ can be obtained as the image
of~$1$ under a lift of the map~$\ZZ \to G,\,1 \mapsto x$.} For example, the
groups~$\QQ$ and~$\QQ/\ZZ$ are injective.
\end{ex}

Injective objects are generally regarded as huge, unwieldy objects. They are
important for the theory, but no practical calculations are made with them.
Projective objects, on the other hand, are often much more accessible. This is
of course a purely social statement, since the injective objects in an abelian
category~$\A$ are precisely the projective objects in~$\A^\op$.

\begin{ex}In the category of modules over some ring, any finite free module~$P$ is
projective: Choose a basis of~$P$ and pick preimages under~$X
\twoheadrightarrow Y$ of the images of the basis vectors in~$Y$. Use these
preimages to define the co-lift~$P \to X$. More generally, assuming the axiom
of choice, any (not necessarily finite) free module is projective. The precise
characterization is that a module is projective if and only if it is a direct
summand of a free module.\footnote{The relationship to other properties
of~$R$-modules is as follows: \\
\[ \xymatrixcolsep{5pc}\xymatrix{
  \text{free} \ar@/^1pc/@{=>}[r] &
  \text{projective} \ar@/^1pc/@{=>}[r] \ar@/^1pc/@{==>}[l]^{\text{$R$ local
  or $R$ PID}} &
  \text{flat} \ar@/^1pc/@{=>}[r] \ar@/^1pc/@{==>}[l]^{\text{$R$ perfect}} &
  \text{torsionfree} \ar@/^1pc/@{==>}[l]^{\text{$R$ Dedekind or Prüfer domain}}
} \]\vspace{-1.6em}}\end{ex}

\begin{ex}Assuming the axiom of choice, any vector space is free and thus
projective.\end{ex}

\begin{ex}An easy example of a projective module which is not free is
the~$\ZZ/(6)$-module~$\ZZ/(2)$. It is projective because there is the direct sum
decomposition $\ZZ/(6) \cong \ZZ/(2) \oplus \ZZ/(3)$. It is not free because
its number of elements is not a multiple of~$6$.\end{ex}

\begin{ex}Let~$\mmm = (3, 1 + \sqrt{-5})$ be the famous example of an ideal
of~$R = \ZZ[\sqrt{-5}]$ which is locally, but not globally principal.
Considered as an~$R$-module, it is projective but not free.\end{ex}

\begin{ex}By the
\href{http://ncatlab.org/nlab/show/Serre-Swan+theorem}{\emph{Serre--Swan
theorem}}, vector bundles provide a systematic source of projective modules.
Let~$M$ be a module over a ring~$R$. Then the induced quasicoherent
module~$M^\sim$ on~$\Spec R$ is a vector bundle (\ie a finite free sheaf of
modules) if and only if~$M$ is projective and finitely generated.\footnote{This
corresponds to the fact that a module is projective and finitely generated if
and only if there is a partition~$1 = \sum_i f_i \in R$ such that the localized
modules~$M[f_i^{-1}]$ are finite free~$R[f_i^{-1}]$-modules. See for instance
Theorem~7.22 in \href{http://math.uga.edu/~pete/integral.pdf}{Pete Clark's
notes on commutative algebra}.}
It is a
trivial bundle if and only if~$M$ is finite free. There is an analogous
relation in the smooth setting: The category of smooth vector bundles on a
compact manifold~$M$ is, by taking global sections, equivalent to the category
of finitely generated projective modules over~$\C^\infty(M)$.
\end{ex}

The reason why injective and projective objects are important in homological
algebra is that they \emph{have great exactness properties}. The following
lemma makes one of this properties precise. Injective and projective objects
thus form the building blocks by which other objects are \emph{resolved by} --
see the next section.

\begin{lemma}Let~$F : \A \to \B$ be an additive functor between abelian
categories. Let~$X^\bullet$ be a bounded below complex of injective objects or
a bounded above complex of projective objects. If~$X^\bullet$ is acyclic,
then~$F(X^\bullet)$ is acyclic as well~(!).\end{lemma}

Note that the statement is totally false without the injectivity or
projectivity assumption.

\begin{proof}One can show that such a complex~$X^\bullet$ is homotopy equivalent to
the zero complex. Any additive functor preserves homotopy
equivalences.\footnote{Additive functors preserve homotopies between morphisms
of complexes, since they carry the defining relation~``$f-g = dh+hd$'' into an
equation of similar kind.}
Therefore the image complex is too homotopy equivalent to zero and in
particular acyclic.

The already interesting special case of three-term complexes, \ie short exact
sequences, can be proved by a simpler argument: If~$0 \to A \to B \to C \to 0$
is a short exact sequence with~$A$ injective or~$C$ projective, one can
construct a retraction of~$A \to B$ respectively a section of~$B \to C$.
Therefore the sequence splits. The claim follows since additive functors
preserve biproducts.\footnote{Formally, a biproduct of two objects~$X$ and~$Y$
consists of morphisms~$\iota_X : X \to X \oplus Y$, $\iota_Y :Y \to X \oplus
Y$, $\pi_X : X \oplus Y \to X$, $\pi_Y : X \oplus Y \to Y$ satisfying the five
relations~$\pi_X \circ \iota_X = \id_X$, $\pi_Y \circ \iota_Y = \id_Y$, $\pi_Y
\circ \iota_X = 0$, $\pi_X \circ \iota_Y = 0$, $\iota_X \circ \pi_X + \iota_Y
\circ \pi_Y = \id_{X \oplus Y}.$ (These relations imply in particular that~$(X \oplus Y,
\iota_X, \iota_Y)$ is a categorical coproduct of~$X$ and~$Y$ and that~$(X
\oplus Y, \pi_X, \pi_Y)$ is a categorical product of~$X$ and~$Y$.) Additive
functors carry these equations into equations of the same kind.}
\end{proof}

\section{Resolutions}
\sectionsummary{Definition \textbullet{} examples \textbullet{} interpretation
\textbullet{} uses}

\begin{defn}An \emph{injective resolution} of an object~$X$ in an abelian
category is an exact sequence of the form~$0 \to X \to I^0 \to I^1 \to \cdots$,
where the objects~$I^n$ are all injective. A short notation is~$0 \to X \to
I^\bullet$. Dually, a \emph{projective resolution} is an exact
sequence~$P^\bullet \to X \to 0$ with the~$P^{-n}$,~$n \geq 0$, projective.
\end{defn}

\begin{ex}\label{ex:syzygies-resolution}Let~$M$ be an~$A$-module. Picking some
set of generators, we obtain a surjective map~$A^{(I)} \twoheadrightarrow M$.
If the chosen family is linearly independent, this map is an isomorphism and~$0
\to A^{(I)} \twoheadrightarrow M \to 0$ is a projective resolution of~$M$.
(Recall that free modules are projective, assuming the axiom of choice.) But in
general, the \emph{module of relations}~$K_0$, the kernel of~$A^{(I)}
\twoheadrightarrow M$, will be nontrivial. Picking generators for~$K_0$, we
obtain a surjective map~$A^{(J)} \twoheadrightarrow K_0$ which we can compose
with the inclusion~$K_0 \hookrightarrow A^{(I)}$. In this way, the top row in
the diagram
\[ \xymatrixcolsep{1pc}\xymatrix{
  A^{(J)} \ar[rr] \ar@{->>}[rd] & & A^{(I)} \ar@{->>}[rr] && M \ar[r] & 0 \\
  & K_0 \ar@{^{(}->}[ru]
} \]
is exact. If the chosen generators for~$K_0$ are linearly independent, we can
tack the zero module at the front and obtain in this manner a projective
resolution of~$M$. But in general, there will be nontrivial relations between
the chosen generators -- \emph{second syzygies} -- and even higher syzygies.
Therefore we have to repeat this process ad infinitum.
\[ \xymatrixcolsep{1pc}\xymatrix{
  \cdots \ar[rr] && A^{(K)} \ar@{->>}[rd] \ar[rr] && A^{(J)} \ar[rr] \ar@{->>}[rd] & & A^{(I)} \ar@{->>}[rr] && M \ar[r] & 0 \\
  & \cdots \ar@{^{(}->}[ru] && K_1 \ar@{^{(}->}[ru] && K_0 \ar@{^{(}->}[ru]
} \]
\end{ex}

\begin{ex}\label{ex:res-z2}A projective resolution of
the~$\ZZ$-module~$\ZZ/(2)$, obtained by the method just sketched, is~$0 \to \ZZ
\stackrel{2}{\to} \ZZ \to \ZZ/(2) \to 0$.
\end{ex}

\begin{ex}\emph{Koszul resolutions} are an important source of resolutions in
algebraic geometry. Let~$f_1,\ldots,f_r$ be a \emph{regular
sequence} of elements of some ring~$A$.\footnote{This means that~$f_1$ is
regular in~$A$, $f_2$ is regular in~$A/(f_1)$, $f_3$ is regular
in~$A/(f_1,f_2)$ and so on. A ring element~$s$ is \emph{regular} if and only if
multiplication by~$s$ is injective. If~$A$ is a ring of functions, for
instance~$A = k[x,y]$, regularity of the sequence is intuitively a requirement on the
equations~``$f_1=0,\ldots,f_n=0$'' to be independent.} Denote by~$\Lambda^n A^r$
the~$n$-th exterior power of~$A^r$. Then~$\Lambda^\bullet A^r \to
A/(f_1,\ldots,f_r) \to 0$ is a free resolution. The
differential sends~$\vec v_1 \wedge \cdots \wedge \vec v_n$ to~$\sum_{i=0}^r
(-1)^i (\vec v \cdot \vec f)\, \vec v_1 \wedge \cdots \wedge \widehat{\vec v_i}
\wedge \cdots \wedge \vec v_n$ (scalar product). Switching toposes, Koszul
resolutions can be used to construct locally free resolutions of structure
sheaves of closed subschemes.
\end{ex}

We can think of a projective resolution~$P^\bullet \to X \to 0$ as providing us
with successively improving approximations: A zeroth approximation of~$X$
is~$P^0$. But this disregards possible relations between the generators (we are
employing a module-theoretic metaphor here), so a better approximation
is~``$P^0 - P^{-1}$''. If there are relations between the relations, we subtract
too much in this expression; an even better approximation is~``$P^0 - P^{-1} +
P^{-2}$''. Taking all the higher corrections into account, we obtain the
symbolic identity~``$X = P^0 - P^{-1} \pm \cdots$''.\footnote{The arithmetic
operations with objects should be conceived in a purely figurative
way. But in fact, there is a way to make these calculations completely
rigorous. Namely, we can attach to any abelian category~$\A$ a very nice
invariant, its \emph{K-theory group}~$K(\A)$ (also called \emph{Grothendieck
group}). It is the abelian group freely generated by the objects of~$\A$ modulo
the relation~$X = X' + X''$ for any short exact sequence~$0 \to X' \to X \to
X'' \to 0$ in~$\A$. One can then check that, if~$P^\bullet \to X \to 0$ is a
bounded resolution (projective or otherwise), the identity~$X = \sum_n (-1)^n
P^n$ holds in~$K(\A)$.

Here are four tangential remarks on the K-theory. (1)~The
map~$(\A,{\oplus})\to(K(\A),{+})$ is the \emph{universal additive invariant}
of~$\A$. (2)~For a bounded complex~$X^\bullet$, one can define its \emph{Euler
characteristic} as~$\chi(X^\bullet) \defeq \sum_n (-1)^n X^n \in K(\A)$.
Denoting by~$H^\bullet(X^\bullet)$ its associated cohomology complex (with zero
differentials), one can check that~$\chi(X^\bullet) =
\chi(H^\bullet(X^\bullet))$. (3)~The K-theory of the category of vector spaces
over some field is zero, by the \emph{Eilenberg--Mazur swindle}. The K-theory
of the category of finite-dimensional vector spaces is~$\ZZ$, by associating to
a vector space its dimension. (4)~The K-theory group of the category of
coherent sheaves of modules on a scheme carries important information about the
intersection theory of the scheme.}

\begin{defn}An abelian category is said to have \emph{enough injectives} if and
only if for any object~$X$ there exists a monomorphism~$X \hookrightarrow I$
into an injective object, \ie if any object can be embedded into an injective
object. Dually, an abelian category has \emph{enough
projectives} if and only if any object is a quotient of a projective
object.\end{defn}

\begin{ex}Assuming the axiom of choice, the category of modules over a ring has
enough injectives and enough projectives. The category of sheaves of abelian
groups on a topological space always has enough injectives, but lacks enough
projectives in general.\end{ex}

\begin{lemma}Let~$\A$ be an abelian category with enough injectives or enough
projectives. Then any object possesses an injective respectively a projective
resolution.\end{lemma}
\begin{proof}The method sketched in Example~\ref{ex:syzygies-resolution}
depended only on the fact that any module admits a surjection from a free
module. This fact can be substituted by the hypothesis on the existence of
enough projectives. The statement about injective resolutions is the formal
dual.\end{proof}

\begin{rem}Let~$\A$ be an abelian category with enough injectives and
projectives. We say that its \emph{homological dimension} is~$\leq n$ if and only
if any object possesses a projective (equivalently, injective) resolution of
length~$n$, \ie comprising objects~$P^0$ to~$P^{-n}$.\footnote{The equivalence
is not entirely trivial. One can use the \emph{dimension shifting trick}
and the characterization of injective objects as those objects~$I$ such
that~$\Ext^1(T,I) = 0$ for all objects~$T$; dually, an object~$P$ is projective
if and only if~$\Ext^1(P,T) = 0$ for alle objects~$T$.} The homological
dimension is one way to measure the homological complexity of a category. For
instance, the category of vector spaces over a field has homological dimension
zero, since any object is projective (and injective).

More generally, there is
an intriguing relation between the homological dimension of the category of
modules over a ring and its Krull dimension: If the ring is a \emph{regular
ring}, they coincide. For instance, the homological dimension of the category
of~$k[x_1,\ldots,x_n]$-modules, where~$k$ is a field, is~$n$. Relatedly, the
category of coherent sheaves on a smooth projective variety of
dimension~$n$ has homological dimension~$n$.
\end{rem}

The following lemma investigates the functorial properties of injective and
projective resolutions.

\begin{lemma}\label{lemma:inj-funct}Let~$0 \to X \to I^\bullet$ be a resolution
by arbitrary objects in an abelian category. Let~$0 \to Y \to J^\bullet$ be a
resolution by injective objects. Let~$f : X \to Y$ be a morphism. Then there
exists a lift of~$f$ to the resolutions, \ie a morphism~$I^\bullet \to
J^\bullet$ of complexes compatible with the maps~$X \to I^0$ and~$Y \to J^0$.
Furthermore, this lift is unique up to homotopy.
\[ \xymatrix{
  0 \ar[r] & X \ar[r]\ar[d] & I^0 \ar[r]\ar@{-->}[d] & I^1 \ar[r]\ar@{-->}[d] & \cdots \\
  0 \ar[r] & Y \ar[r] & J^0 \ar[r] & J^1 \ar[r] & \cdots
} \]
\end{lemma}
\begin{proof}We obtain a morphism~$I^0 \to J^0$ by lifting the morphism~$X \to
Y \to J^0$ along the monomorphism~$X \to I^0$. This is possible by the
injectivity of~$J^0$. The induction step is a bit more complicated.
\end{proof}

\begin{cor}\label{cor:inj-he}Any two injective resolutions of an object are
homotopy equivalent.\end{cor}
\begin{proof}Let~$0 \to X \to I^\bullet$ and~$0 \to X \to J^\bullet$ be
injective resolutions. By the previous lemma, the identity~$\id_X : X \to X$ lifts to
morphisms~$I^\bullet \to J^\bullet$ and~$J^\bullet \to I^\bullet$. The
composition of these lifts is a lift of~$\id_X$ to~$I^\bullet \to I^\bullet$
respectively~$J^\bullet \to J^\bullet$. By the uniqueness statement, these
compositions are homotopic to the identity, since~$\id_{I^\bullet}$
respectively~$\id_{J^\bullet}$ are trivially lifts of~$\id_X$.\end{proof}

\emph{Injective resolutions allow us to replace badly behaved
objects by (complexes of) injective objects,} which, thanks to their great
exactness properties, mix much better with additive functors. This is the
reason why injective (and dually, projective) resolutions are important. No
information about morphisms is lost in this process, since morphisms between
objects lift to morphisms between resolutions.

For future reference, we want to precisely state the relation between an
object~$X$, considered as a complex~$X[0]$ concentrated in degree zero, and
an associated injective resolution~$I^\bullet$. Namely, the augmentation~$X \to
I^0$ gives rise to a morphism~$X[0] \to I^\bullet$ of complexes which is
a \emph{quasi-isomorphism} by the following definition.

\newpage

\begin{defn}A morphism of complexes~$K^\bullet \to L^\bullet$ is a
\emph{quasi-isomorphism} if the induced morphisms~$H^n(K^\bullet) \to
H^n(L^\bullet)$ in cohomology are isomorphisms for all~$n$.\footnotemark
\end{defn}

Any homotopy equivalence is a quasi-isomorphism, but the converse is totally
false.
\footnotetext{Note that
if~$K^\bullet \to L^\bullet$ is a quasi-isomorphism, there is usually no
quasi-isomorphism in the opposite direction. For instance, there is no
quasi-isomorphism~$(\ZZ/(2))[0] \to P^\bullet$ when~$P^\bullet \to \ZZ/(2) \to
0$ is the projective resolution of Example~\ref{ex:res-z2}. Accordingly, we say
that two complexes~$K^\bullet$ and~$L^\bullet$ are \emph{quasi-isomorphic} not
when there exists a quasi-isomorphism between them, but when there exists a
\emph{zigzag} of quasi-isomorphisms~$K^\bullet \to Z_0^\bullet \leftarrow
Z_1^\bullet \to Z_2^\bullet \leftarrow \cdots \to Z_n^\bullet \leftarrow
Y^\bullet$. This complication is a source of technical difficulties. Note that to say
that~$K^\bullet$ and~$L^\bullet$ are quasi-isomorphic is slightly stronger than
to say that they have isomorphic cohomology. In the latter case, there is no
guarantee that the isomorphisms are induced by a (zigzag of) morphisms of
complexes.}

\section{Derived functors}
\sectionsummary{Definition \textbullet{} indeterminacy \textbullet{} examples
\textbullet{} long exact sequence \textbullet{} uses}

\begin{defn}Let~$F : \A \to \B$ be a left-exact functor between abelian
categories. Assume that~$\A$ has enough injectives. Then~$\RR F(X)$, the
\emph{total right-derived functor of~$F$} evaluated at an object~$X$ of~$\A$,
is the complex
\[ \RR F(X){:}\quad \cdots \to 0 \to F(I^0) \to F(I^1) \to \cdots, \]
where~$0 \to X \to I^\bullet$ is an injective resolution of~$X$. The
\emph{$n$-th right-derived functor of~$F$} evaluated at~$X$ is the~$n$-th
cohomology of this complex:
$R^n F(X) \defeq H^n(\RR F(X)) = H^n(F(I^\bullet))$.
\end{defn}

So, to calculate~$R^n F(X)$, we take an injective resolution of~$X$, apply~$F$
to this complex (making sure to strip the leading~``$F(X)$''), and then take
cohomology. Note that, even though the complex~$I^\bullet$ is not acyclic only
at position zero, the complex~$F(I^\bullet)$ may have cohomology in arbitrary
high degrees~(!).

Since we made the arbitrary choice of an injective resolution, we have to
discuss well-definedness of course. If~$0 \to X \to J^\bullet$ is a second
injective resolution, there is a homotopy equivalence~$I^\bullet \simeq
J^\bullet$ by Corollary~\ref{cor:inj-he}. This equivalence is preserved by the
functor~$F$, so the complexes~$F(I^\bullet)$ and~$F(J^\bullet)$ are homotopy
equivalent as well. In particular, they are quasi-isomorphic and have
isomorphic cohomology.

Summing up, the complex~$\RR F(X)$ is well-defined up to quasi-isomorphism and~$R^n F(X)$
is well-defined up to isomorphism. For reasons to be stated below, we don't
want to stress that with our definition,~$\RR F(X)$ is actually even
well-defined up to homotopy equivalence.

Suppose we fix an injective resolution for every object of~$\A$. Then the rule~$X
\mapsto R^n F(X)$ can be made into an additive functor~$R^n F : \A \to \B$,
since a morphism~$X \to Y$ between objects induces, by Lemma~\ref{lemma:inj-funct}, a morphism between their
associated injective resolutions (unique up to homotopy) and
therefore a well-defined morphism~$R^n F(X) \to R^n F(Y)$.

Different choices of resolutions lead to naturally isomorphic derived
functors.
There is an analogous definition for the left-derived
functors of right-exact functors, using projective instead of injective
resolutions.

\begin{ex}We have~$R^0 F(X) \cong F(X)$, naturally in~$X$. To see this, pick
an injective resolution~$0 \to X \to I^\bullet$ and apply~$F$ to
the exact sequence~$0 \to X \to I^0 \to I^1$.
\end{ex}

It is in this sense that the~$R^n F$ are ``derived'' functors of~$F$; $R^0 F$
coincides with~$F$ and the higher derived functors bear some relation with~$F$.
But note that~$R^{n+1} F$ is \emph{not} the first derived functor of~$R^n F$
(indeed, in general the higher derived functors are neither left- nor
right-exact, so we cannot derive~$R^n F$) and that there is no Leibniz rule to
be found.

\begin{ex}Assume~$F$ to even be exact. Then the higher derived functors of~$F$
vanish, \ie~$R^n F(X) = 0$ for all objects~$X$ and~$n > 0$. To verify this, use
that exact functors commute with cohomology.\end{ex}

This suggests the following motto: \emph{Derived functors measure the
failure of a functor to be exact.}

\begin{ex}Consider the dualization functor~$F : \Ab^\op \to \Ab,\,M \mapsto
\Hom(M,\ZZ)$. Since~$F$ is an instance of a Hom functor, it is left-exact. To
ensure that the contravariance doesn't cause unnecessary difficulties, we spell
out precisely what this means: If~$0 \to M \to N \to P \to 0$ is a short exact
sequence in~$\Ab^\op$ (this really means that we have a short exact sequence~$0
\leftarrow M \leftarrow N \leftarrow P \leftarrow 0$ in~$\Ab$), then~$0 \to F(M) \to F(N) \to
F(P)$ is exact in~$\Ab$. To compute~$\RR F(\ZZ/(2))$, we use the projective
(even free) resolution
\[ 0 \lra \ZZ \stackrel{2}{\longrightarrow} \ZZ \lra \ZZ/(2) \lra 0, \]
which corresponds to an injective resolution in~$\Ab^\op$. The total derived
functor is therefore the complex
\[ 0 \lra F(\ZZ) \stackrel{2}{\longrightarrow} F(\ZZ) \lra 0, \]
which can be simplified using~$F(\ZZ) \cong \ZZ$ to
\[ 0 \lra \ZZ \stackrel{2}{\longrightarrow} \ZZ \lra 0. \]
Thus we obtain~$R^0 F(\ZZ) \cong F(\ZZ) = 0$ and~$R^1 F(\ZZ) \cong \ZZ/(2)$.
Note that the torsion did not vanish, but instead moved to~$R^1$.
\end{ex}

Many important functors are derived functors. For instance,
\begin{itemize}
\item the right derived functors of~$\Hom(X, \placeholder) : \A^\op \to
\Ab$ are the \emph{Ext functors} $\Ext^n(X, \placeholder)$,
\item the left derived functors of~$M \otimes_A \placeholder : \Mod(A) \to \Ab$
are the \emph{Tor functors} $\Tor_n(M, \placeholder)$,
\item the right derived functors of the global sections functor~$\Gamma :
\AbSh(X) \to \Ab$ calculate \emph{sheaf cohomology}, and
\item the right derived functors of the functor~$\Mod(G) \to \Ab$ which associates to
a~$G$-module its subset of~$G$-invariant elements calculate \emph{group
cohomology}.
\end{itemize}

The raison d'être for derived functors is given by the following lemma.

\begin{lemma}Let~$F : \A \to \B$ be a left-exact functor between abelian
categories. Assume that~$\A$ has enough injectives. Then, for any short exact
sequence~$0 \to X \to Y \to Z \to 0$ in~$\A$, there is an induced long exact
sequence
\[ 0 \to F(X) \to F(Y) \to F(Z) \to R^1 F(X) \to R^1 F(Y) \to R^1 F(Z) \to R^2
F(X) \to \cdots, \]
depending functorially on the short exact sequence.\end{lemma}
\begin{proof}Use the \emph{horseshoe lemma} to obtain a short exact sequence
relating injective resolutions of~$X$, $Y$, and~$Z$. Then perform the usual
diagram chase to construct the connecting morphisms.\end{proof}

Note that the lemma shows very visibly that~$F$ is exact if and only if~$R^1 F
= 0$.

In practice, calculating the higher derived functors can be quite hard. There
are two main techniques: One can use exact sequences (and spectral sequences)
to draw some conclusions about the derived functors, or hope that there are
more amenable resolutions than resolutions by unwieldy injectives available. To
this end, the following lemma is crucial:

\begin{lemma}Let~$F : \A \to \B$ be a left-exact functor between abelian
categories. Assume that~$\A$ has enough injectives. Let~$X$ be an object
of~$\A$. Let~$0 \to X \to U^\bullet$ be a resolution of~$X$ by
\emph{$F$-acyclic objects}, \ie objects such that~$R^{\geq 1}F(U^m) = 0$.
Then~$\RR F(X)$ is quasi-isomorphic to~$F(U^\bullet)$ and in particular~$R^n
F(X) \cong H^n(F(U^\bullet))$.\footnote{Note that~$\RR F(X)$ will in general
\emph{not} be homotopy equivalent to~$F(U^\bullet)$. This is the reason why we
identify~$\RR F(X)$ up to quasi-isomorphism and not up to homotopy equivalence.}\end{lemma}

In other words, we may use resolutions by~$F$-acyclic objects instead of
injective objects to calculate the derived functors. For instance, we can use
\emph{flat resolutions} to calculate~$\Tor$ and \emph{flabby resolutions} to calculate sheaf
cohomology. The general philosophy of derived functors is therefore as follows:
The complex~$\RR F(X)$ is obtained by replacing~$X$ with a (complex of) objects
which are in some sense well-suited to~$F$ and applying~$F$ to those.

Derived functors can be used to fix several defects in the original functors. The
paramount defect of a non-exact functor is, of course, its failure to preserve
exactness. This is fixed by the long exact sequence. But derived
functors also fix the failure of certain identities. For instance, if~$M$ is an
arbitrary~$A$-module, in general it does not hold that
\[ M^{\vee\vee} \defeq \Hom(\Hom(M,A),A) \cong M.\footnote{Consider
the~$\ZZ$-module~$M = \ZZ/(2)$. Then~$M^\vee = 0$.} \]
But, denoting by~$(\placeholder)^{\dd}$ the total derived functor of the
dualization functor, the complex~$M^{\dd\dd}$ \emph{is} quasi-isomorphic to~$M$
(regarded as a complex concentrated in degree zero).\footnote{We are skating
over some details here. In particular, we have not explained how to apply~$\RR
F$ to a \emph{complex}~$K^\bullet$ (instead of a single object); this is done by
finding a quasi-isomorphism~$K^\bullet \to I^\bullet$ to a complex consisting
of injectives and setting~$\RR F(K^\bullet) \defeq F(I^\bullet)$. Also one has
to impose some finiteness conditions, for instance~$A$ should be Noetherian
and~$M$ finitely generated.} Similarly, in algebraic geometry, there is the
\emph{projection formula}
\[ \pi_*\E \otimes \F \cong \pi_*(\E \otimes \pi^*\G), \]
valid in the case that~$\G$ is a locally free sheaf.
For the derived functors, the formula holds in complete generality, assuming
only some finiteness conditions:
\[ \RR\pi_*(\E^\bullet) \otimes^\LL \F^\bullet \simeq_\text{qis}
\RR\pi_*(\E^\bullet \otimes^\LL \LL\pi^*\G^\bullet). \]

\section{Example: Ext}
\sectionsummary{Definition \textbullet{} lifting problems \textbullet{}
extensions}

Let~$\A$ be an abelian category with enough injectives and projectives. Then
one can show that the right-derived functors of the Hom functor coincide in the
sense that
\[ R^n(\Hom_\A(X,\placeholder))(Y) \cong R^n(\Hom_\A(\placeholder,Y))(X). \]
We can thus define~$\Ext^n_\A(X,Y)$ as either object.

The elements of~$\Ext^n(X,Y)$ have a concrete interpretation. Namely, they
correspond to~\emph{$n$-extensions} of~$Y$ by~$X$, that is exact sequences of
the form
\[ 0 \lra Y \lra E_n \lra \cdots \lra E_1 \lra X \lra 0, \]
up to a certain equivalence relation.

\begin{prop}There is a natural bijective correspondence between elements
of~$\Ext^1(X,Y)$ and equivalence classes of short exact sequences~$0 \to Y
\to E \to X \to 0$.\end{prop}
\begin{proof}Let~$0 \to Y \to E \to X \to 0$ be a short exact sequence.
Applying the functor~$\Hom_\A(X,\placeholder)$, we obtain the long exact
sequence
\[ 0 \to \Hom(X,Y) \to \Hom(X,E) \to \Hom(X,X) \stackrel{\partial}{\to}
\Ext^1(X,Y) \to \cdots. \]
The element of~$\Ext^1(X,Y)$ corresponding to the short exact sequence is
then~$\partial(\id_X)$.

The converse direction is a bit more complicated.\footnote{Let~$\alpha \in
\Ext^1(X,Y)$. Embed~$Y$ into an injective object~$I$. The long exact sequence
induced by the short exact sequence~$0 \to Y \to I \to I/Y \to 0$ shows that
the map~$\partial : \Hom(X,I/Y) \to \Ext^1(X,Y)$ is surjective. Therefore there
exists a morphism~$f : X \to I/Y$ such that~$\partial(f) = \alpha$. The short
exact sequence corresponding to~$\alpha$ is then~$0 \to Y \to E \to X \to 0$,
where~$E \to X$ is the pullback of~$I \to I/Y$ along~$f$.}
\end{proof}

Under this correspondence, the trivial short exact sequence~$0 \to Y \to Y
\oplus X \to X \to 0$ corresponds to the zero element in~$\Ext^1(X,Y)$. Thus a
short exact sequence splits if and only if its Ext class vanishes.

Here is a fun application of~$\Ext^1$. Let~$i : U \hookrightarrow X$ be a
subobject. Let~$f : U \to Y$ be a morphism. Is there an extension of~$f$
to~$X$, \ie a morphism~$\bar f : X \to Y$ such that~$\bar f \circ i = f$?
Such a question is of course trivial in the category of vector spaces over a
field, since there we can just extend a basis of~$U$ to a basis of~$X$ and
construct~$\bar f$ on this basis. But in general abelian categories, the
question is non-trivial.

We can give a precise answer to the question using the Ext functor. Applying
the functor~$\Hom(\placeholder,Y)$ to the short exact sequence~$0 \to U \to X
\to X/U \to 0$, we obtain the long exact sequence
\[ 0 \to \Hom(X/U,Y) \to \Hom(X,Y) \to \Hom(U,Y) \stackrel{\partial}{\to}
\Ext^1(X/U,Y) \to \cdots. \]
The map~$\Hom(X,Y) \to \Hom(U,Y)$ is given by precomposing with~$i : U \to X$.
Therefore the morphism~$f$ lifts to~$X$ if and only if it has a preimage under
this map; by exactness, this is the case if and only if~$\partial(f)$ vanishes
in~$\Ext^1(X/U,Y)$.

\section{Example: Tor}
\sectionsummary{Definition \textbullet{} Serre intersection formula}

Let~$A$ be a ring (commutative, with unit). Tensoring with a fixed module
defines a right-exact functor~$\Mod(A) \to \Mod(A)$. Since one can show that
\[ L^n (M \otimes_A \placeholder)(N) \cong L^n (\placeholder \otimes_A N)(M),
\]
we can use both to define~$\Tor_n^A(M,N)$.

Here is a fun example from algebraic geometry. Let~$I$ and~$J$ be ideals of~$A
\defeq k[x,y]$. These define closed subschemes~$V(I)$ and~$V(J)$
of~$\AA^2_k$, the vanishing locus of the polynomials in~$I$ respectively~$J$.
The ring of functions is~$A/I$ and~$A/J$ respectively. The scheme-theoretical
intersection is given by~$V(I + J)$ with ring of functions~$A/(I + J) \cong A/I
\otimes_A A/J$.

We can then define the \emph{intersection multiplicity} of~$V(I)$ and~$V(J)$ at
a point~$x \in \AA^2_k$ (corresponding to a prime ideal~$\ppp$) as the
dimension of the stalk~$(A/(I+J))_\ppp$ as a~$k$-vector space.

\begin{ex}Let~$I = (y-x^2)$ and~$J = (y)$ be ideals in~$k[x,y]$ defining
the parabola and the~$x$-axis, respectively. The ring of functions of~$V(I +
J)$ is
\[ k[x,y]/(I + J) = k[x,y]/(y-x^2,y) \cong k[x]/(x^2). \]
Since any elements not contained in the ideal~$(x,y) = (x)$ of this ring are
invertible, localizing this ring at~$(x,y)$ doesn't change it. Thus the
intersection multiplicity of~$V(I)$ and~$V(J)$ at the
the origin (corresponding to the prime ideal~$(x,y))$ is~$2$, just as we would
expect.\end{ex}

We can globalize the definition. Let~$\I$ and~$\J$ be sheaves of ideals on a
scheme~$X$ over a field~$k$ of dimension~$2$, defining closed
subschemes~$V(\I)$ and~$V(\J)$.  Their scheme-theoretical intersection is~$V(\I
+ \J)$ with structure sheaf~$\O_X/(\I + \J) \cong \O_X/\I \otimes_{\O_X}
\O_X/\J$.\footnote{More precisely,~$\O_X/(\I + \J)$ is the pushforward of the
structure sheaf of~$V(\I + \J)$ along the closed immersion~$V(\I + \J)
\hookrightarrow X$. As is customary in this context, we will identify sheaves
on closed subspaces with their pushforward to the ambient scheme.} If~$V(\I)$
and~$V(\J)$ are ``in general position'' and intersect in a finite number of
points, we can define their \emph{intersection product} as the number
\[ V(\I) \ip V(\J) \defeq \sum_{x \in V(\I) \cap V(\J)}
  \dim_k\, (\O_X/\I \otimes_{\O_X} \O_X/\J)_x. \]
Since the tensor product sheaf~$\O_X/\I \otimes_{\O_X} \O_X/\J$ is supported
precisely at the intersection points, this can also be stated more abstractly
using sheaf cohomology as
\[ V(\I) \ip V(\J) = \dim_k H^0(X, \O_X/\I \otimes_{\O_X} \O_X/\J) =
\chi(\O_X/\I \otimes_{\O_X} \O_X/\J). \]
Since discrete points don't have higher cohomology, the \emph{Euler
characteristic} appearing in this formula, defined as~$\chi(\E) \defeq
\sum_{i=0}^\infty (-1)^i \dim_k H^i(X, \E)$, is simply given by the first
summand.

However, this definition can't be used to calculate non-proper intersections
like $V(\I) \ip V(\I)$. In this case, the intersection number should be defined in a way that if we can
move~$V(\I)$ to a ``linearly equivalent divisor''~$V(\I')$, then~$V(\I) \ip
V(\I) \defeq V(\I) \ip V(\I')$. For instance, any two lines in~$\PP^2_k$ should
have intersection product~$1$, even if we intersect a line with itself.

The correct definition is given by \emph{Serre's intersection formula}
\[ V(\I) \ip V(\J) \defeq \chi(\O_X/\I \otimes^\LL_{\O_X} \O_X/\J) \defeq
  \sum_{n=0}^\infty (-1)^n \chi(\Tor_n^{\O_X}(\O_X/\I,\O_X/\J)). \]
It is a refinement of the naive definition, which is the~$n = 0$ term in the
sum. In the case that~$V(\I)$ and~$V(\J)$ happen to be in general position, one can
show that the higher Tor sheaves vanish. Therefore Serre's intersection formula
recovers the naive definition in this case.

For a very readable account of this topic, see Manin's \emph{Lectures on the
$K$-Functor in Algebraic Geometry}.

%\section{Example: Sheaf cohomology}
%\sectionsummary{Definition \textbullet{} comparison with singular cohomology
%\textbullet{} uses}
%
%\begin{itemize}
%\item Resolution of $\underline{\RR}$
%\item Comparison with singular cohomology
%\item Paucity of projective sheaves
%\item Example: section-wise surjectivity
%\item Uninteresting: $\C^\infty$-modules
%\end{itemize}

\section{Outlook}
\sectionsummary{Derived categories
\textbullet{} model categories}

The \emph{derived category}~$D(\A)$ of an abelian category~$\A$ is the
\emph{localization} of the category~$\Kom(\A)$ of complexes \emph{at the class
of quasi-isomorphisms}. Explicitly, its objects are simply the objects
of~$\Kom(\A)$. For any morphism in~$\Kom(\A)$, there is a corresponding
morphism in~$D(\A)$; but additionally, we adjoin a formal inverse for any
quasi-isomorphism in~$\Kom(\A)$. Morphisms in~$D(\A)$ are therefore formal
``zigzags''~$K^\bullet \to Z_0^\bullet \leftarrow
Z_1^\bullet \to Z_2^\bullet \leftarrow \cdots \to Z_n^\bullet \leftarrow
L^\bullet$ consisting of honest morphisms from~$\Kom(\A)$ and formal inverses
to quasi-isomorphisms.

\begin{rem}Many important categories can be obtained as localizations. For
instance, the category of complete metric spaces is the localization of the
category of all metric spaces at the class of bilipschitz maps with dense
image. The category of sheaves on a topological space~$X$ is the localization
of the category of presheaves on~$X$ at the class of stalkwise isomorphisms.
The category of germs of spaces is the localization of the category of pointed
spaces at the class of maps which restrict to isomorphisms in neighbourhoods of
the base points.\end{rem}

We already discussed the motto of replacing objects by resolutions. This motto
can be rigorously formalized in derived categories: If~$0 \to X \to I^\bullet$
is a resolution (injective or otherwise), the morphism~$X[0] \to I^\bullet$ is
a quasi-isomorphism and therefore an isomorphism in~$D(\A)$.

Let~$F : \A \to \B$ be a left-exact functor. Recall that the complex~$\RR F(X)$
is well-defined up to quasi-isomorphism. Considered as an object of~$D(\B)$, it
is therefore well-defined up to isomorphism; thus~$\RR F$ can be understood as
a functor~$D(\A) \to D(\B)$.\footnote{This is not quite correct. In
general,~$\RR F$ is only well-defined as a functor~$D^+(\A) \to D^+(\B)$,
where~$D^+(\A)$ is the localization of the category of \emph{bounded below}
chain complexes at the quasi-isomorphisms. We ignore such boundedness issues.}
\emph{Derived categories are thus the natural source and target of total derived
functors.}

The main advantage of the derived category setting is that, unlike with the
classical approach, we forget only so much information as strictly needed.
In particular, we retain the information about the \emph{complex}~$\RR F(X)$ as
opposed to only the cohomology groups~$R^n F(X)$. A concrete benefit of this is
that there is an easy formula for the composition of derived functors.

\begin{prop}Let~$F : \A \to \B$ and~$G : \B \to \C$ be left-exact functors.
Assume that a certain homological compatibility assumption is satisfied.
Then~$\RR G \circ \RR F \cong \RR (G \circ F)$.\end{prop}

This formula generalizes to the composition of more than two functors.
Explicitly, to calculate~$\RR (G \circ F)(X)$, we can first pick a suitable
resolution~$0 \to X \to I^\bullet$, apply~$F$ to obtain~$\RR F(X) =
F(I^\bullet)$, pick a resolution of that, \ie a quasi-isomorphism~$F(I^\bullet)
\to J^\bullet$, and finally apply~$G$ to obtain~$\RR (G \circ F)(X) \cong
G(J^\bullet)$.\footnote{We could also try to find a resolution~$0 \to X \to
I^\bullet$ such that the objects~$F(I^n)$ are~$G$-acyclic. Then it's not
necessary to resolve~$F(I^\bullet)$.}

Summarizing, the information contained in the \emph{complex}~$\RR F(X)$, combined with the functor~$\RR G$, is
sufficient to determine~$\RR (G \circ F)(X)$. In contrast, for the classical
right-derived functors, there is only the \emph{Grothendieck spectral sequence}
\[ E_2^{pq} = R^p G(R^q F(X)) \Longrightarrow R^n (G \circ F)(X). \]
The objects contained in the~$E_2$-page are of course not enough to uniquely
determine the limit; one needs the differentials and the higher pages. Thus
knowledge of the functors~$R^p G$ and~$R^q F$ does not suffice to
calculate~$R^n(G \circ F)$.

A somewhat lesser-known example along the same lines goes as follows. Let~$0 \to U^{-k} \to
\cdots \to U^0 \to X \to 0$ be a finite resolution of an object~$X$ in an abelian
category~$\A$. Let~$F : \A \to \B$ be a left-exact functor. Assume that the
complexes~$\RR F(U^i)$ and the morphisms~$\RR F(U^i) \to \RR F(U^{i+1})$ are
known. Then there is a fully explicit description of~$\RR F(X)$.\footnote{Namely,
the complex~$\RR F(X)$ can be obtained as certain iterated \emph{cones}.}
In contrast, in the classical case, there is only a spectral sequence~$H^p((R^q
F(U^p))_p) \Rightarrow R^n F(X)$.

\begin{center}\emph{$\bigstar$ Complexes good, cohomology bad. $\bigstar$}\end{center}

Besides its use as a great technical tool for dealing with derived functors,
derived categories are also interesting on their own. For a ring~$A$ or a
scheme~$X$, the derived category of modules on~$A$ or the derived category of
sheaves of modules on~$X$ is a valuable invariant which appears to sit just
right on the spectrum between ``extremely valuable, but not computable'' and
``easily computable, but not very interesting''.

There are some relations between rings and schemes which can only be expressed
on a derived level. For example, the polynomial ring~$k[x_1,\ldots,x_n]$ and
the exterior algebra over~$k^n$ are not at all isomorphic. However, their
associated derived categories \emph{are} equivalent. This instance of \emph{Koszul
duality} has even practical implications, in that certain algorithms dealing
with the polynomial ring (which is infinite dimensional over~$k$) can be
massively sped up by transporting them along the equivalence to work with the
exterior algebra instead (which is finite dimensional over~$k$).\footnote{See
articles by Mohamed Barakat for details.}

In geometry, there are are important examples of schemes which ``should'' be
the same in some sense but are not isomorphic. In this case, their relation is
sometimes captured by a \emph{derived equivalence}, \ie an equivalence between
the associated derived categories of sheaves of modules. This is, for instance,
the case for the orbifold~$X^n/\!\!/S_n$ of unordered~$n$-tuples of points on a
surface~$X$ and the Hilbert scheme~$X^{[n]}$ of~$n$ points on~$X$. Their
derived categories of sheaves of modules are equivalent.

\begin{rem}Despite their applications, derived categories do have several
problems. One is that they ``don't glue very well'': Denote by~$D(X)$ the
derived category of sheaves on a scheme~$X$. Let~$X$ be covered by open
subsets~$U$ and~$V$. Then it would be nice if~$D(X)$ was a (2-)fiber product
of~$D(U)$ and~$D(V)$ over~$D(U \cap V)$. However, this is not the case. A way
to fix these problems is to turn to \emph{enriched derived categories}.
\end{rem}

There are a number of fine expository articles on derived categories. The reader is
warmly encouraged to study them.
\begin{itemize}
\item R. P. Thomas. \href{http://arxiv.org/abs/math/0001045}{\emph{Derived
categories for the working mathematician}}. (Start here.)
\item M. Haiman.
\href{https://math.berkeley.edu/~mhaiman/math256-fall13-spring14/cohomology-1_derived-cat.pdf}{\emph{Notes
on derived categories and derived functors}}.
\item B. Keller.
\href{http://www.maths.ed.ac.uk/~aar/papers/keller.pdf}{\emph{Derived
categories and their uses}}.
\item B. Keller.
\href{http://webusers.imj-prg.fr/~bernhard.keller/publ/cam.pdf}{\emph{Introduction
to abelian and derived categories}}.
\item L. Nicolaescu.
\href{http://www3.nd.edu/~lnicolae/Verdier-ams.pdf}{\emph{The derived
categories of sheaves and the Poincaré--Verdier duality}}. (With an emphasis on
duality theory.)
\end{itemize}

Finally, we want to mention \emph{model categories}. They are necessary to
extend the theory to non-abelian situations. For instance, let~$f : X \to Y$
and~$g : Y \to Z$ be morphisms of schemes. Then there is an exact sequence
\[ f^* \Omega^1_{Y/Z} \lra \Omega^1_{X/Z} \lra \Omega^1_{X/Y} \lra 0 \]
relating several sheaves of Kähler differentials. Of course, noticing the
missing zero at the front, you can hear this sequence screaming ``derive
me!''.\footnote{The author learned of those screams from Timo Schürg.}

This phenomenon is already visible on the level of affine schemes: Let~$A \to B
\to C$ be a sequence of rings. Then there is an exact sequence
\[ \Omega^1_{B/A} \otimes_B C \lra \Omega^1_{C/A} \lra \Omega^1_{C/B} \lra 0.
\]
Unfortunately, the functor associating to an algebra its module of Kähler
differentials can't be derived with the techniques described in these notes,
since its source category is not abelian. Check out A.~Raksit,
\href{http://www.arponr.com/files/quillen-cotangent.pdf}{\emph{Defining the
cotangent complex}}.

\end{document}
